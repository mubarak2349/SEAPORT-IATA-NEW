<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>mubarak</title>

<style>
/* ===== Flying Logo (NO rectangle) ===== */
.bg-flight{
 position:fixed;width:260px;height:110px;opacity:.14;
 pointer-events:none;z-index:0;
 clip-path:polygon(5% 50%,15% 35%,40% 30%,70% 20%,95% 50%,70% 80%,40% 70%,15% 65%);
 transition:transform 5s linear,top 5s linear,left 5s linear;
}
.logo{width:100%;height:100%;position:relative}
.blue{position:absolute;width:55%;height:100%;background:#0a4fd6;
 clip-path:polygon(0 10%,85% 0,45% 100%,0 90%)}
.white{position:absolute;width:70%;height:100%;left:30%;background:#fff;
 clip-path:polygon(20% 0,60% 0,40% 50%,60% 100%,20% 100%,40% 50%)}
.dark{position:absolute;width:55%;height:100%;right:0;background:#2f2f2f;
 clip-path:polygon(15% 0,100% 50%,15% 100%)}
</style>

<style>
:root{
 --bg:#020617;--panel:#020617;--card:#0b1220;--border:#1f2937;
 --txt:#e5e7eb;--muted:#9ca3af;
 --green:#22c55e;--amber:#f59e0b;--red:#ef4444;
 --blue:#38bdf8;--purple:#a78bfa;
 --current:#1e3a8a;--next:#0f766e
}
.light{
 --bg:#f8fafc;--panel:#fff;--card:#fff;--border:#e5e7eb;
 --txt:#020617;--muted:#475569;
 --current:#eef2ff;--next:#ecfeff
}
*{box-sizing:border-box}
body{
 margin:0;font-family:system-ui,Segoe UI,Arial;
 background:radial-gradient(circle at top,var(--card),var(--bg) 70%);
 color:var(--txt)
}
header{
 display:flex;align-items:center;gap:12px;padding:16px 22px;
 background:var(--panel);position:sticky;top:0;z-index:10
}
header h3{margin:0;font-size:20px}
.theme-btn{
 margin-left:auto;padding:6px 12px;border-radius:14px;
 border:1px solid var(--border);background:var(--card);cursor:pointer
}
.dashboard{
 padding:20px;display:grid;
 grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:16px
}
.card{
 background:linear-gradient(180deg,var(--card),var(--bg));
 border-radius:18px;padding:16px
}
.card h4{margin:0;font-size:12px;color:var(--muted)}
.card p{margin:6px 0;font-size:24px;font-weight:700}
.wave{height:8px;border-radius:20px;background:var(--bg)}
.wave span{display:block;height:100%;background:linear-gradient(90deg,var(--blue),var(--purple))}
.container{padding:0 20px 30px}
.table-wrap{background:var(--panel);border-radius:22px;overflow:auto}
table{width:100%;border-collapse:collapse;font-size:12px}
th,td{padding:8px;text-align:center;border-bottom:1px solid var(--border)}
tr.freeze{opacity:.4}
tr.current{background:var(--current)}
tr.next{background:var(--next)}
input{
 width:85px;padding:4px;text-align:right;
 background:var(--bg);color:var(--txt);
 border:1px solid var(--border);border-radius:6px
}
.btn{font-size:10px;padding:3px 6px;border-radius:6px;cursor:pointer}
.paidCell{background:rgba(34,197,94,.25)}
.pendingCell{background:rgba(245,158,11,.25)}
.days-ok{color:var(--green)}
.days-warn{color:var(--amber)}
.days-over{color:var(--red)}
footer{text-align:center;padding:12px;opacity:.6}
</style>
</head>

<body>

<div class="bg-flight" id="bgFlight">
 <div class="logo">
  <div class="blue"></div>
  <div class="white"></div>
  <div class="dark"></div>
 </div>
</div>

<header>
 <h3>SEAPORT (Air Division) â€“ IATA CASS Payment Calendar</h3>
 <button class="theme-btn" onclick="toggleTheme()">ðŸŒ™ / ðŸŒž</button>
</header>

<div class="dashboard">
 <div class="card"><h4>Invoice</h4><p id="dInv">â‚¹0</p><div class="wave"><span id="wInv"></span></div></div>
 <div class="card"><h4>Pending</h4><p id="dPend">â‚¹0</p><div class="wave"><span id="wPend"></span></div></div>
 <div class="card"><h4>Remaining</h4><p id="dRem">â‚¹0</p><div class="wave"><span id="wRem"></span></div></div>
</div>

<div class="container">
 <div class="table-wrap">
  <table>
   <thead>
    <tr>
     <th>Period</th><th>Invoice</th><th>Due</th><th>Days</th>
     <th>SriLankan</th><th>Status</th>
     <th>AirIndia</th><th>Status</th>
     <th>Singapore</th><th>Status</th>
     <th>Total</th><th>Paid</th><th>AVL</th><th>Borrowed</th><th>Remaining</th>
    </tr>
   </thead>
   <tbody id="tbody"></tbody>
  </table>
 </div>
</div>

<footer>Offline â€¢ Local Storage Enabled</footer>

<script>
/* ================= LOCAL STORAGE ================= */
const LS_KEY="SEAPORT_CASS_LOCAL";
let store=JSON.parse(localStorage.getItem(LS_KEY)||"{}");

function saveLocal(){
 localStorage.setItem(LS_KEY,JSON.stringify(store));
}

/* ================= PERIODS ================= */
const periods=[
 ["20251201F","2025-12-25","2026-01-14"],
 ["20251202F","2026-01-08","2026-01-30"],
 ["20260101F","2026-01-25","2026-02-16"]
];
const today=new Date();

/* ================= UTILS ================= */
function inr(x){return "â‚¹"+(x||0).toLocaleString("en-IN")}
function toggleTheme(){
 document.body.classList.toggle("light");
 localStorage.theme=document.body.classList.contains("light")?"light":"dark"
}
if(localStorage.theme==="light")document.body.classList.add("light");

/* ================= TABLE ================= */
function render(){
 const tb=document.getElementById("tbody");
 tb.innerHTML="";
 let invT=0,paidT=0,remT=0;

 periods.forEach(p=>{
  const d=store[p[0]]||{};
  const sl=d.sl||0,ai=d.ai||0,sg=d.sg||0;
  const paid=(d.slp?sl:0)+(d.aip?ai:0)+(d.sgp?sg:0);
  const inv=sl+ai+sg;
  const rem=inv-paid-(d.avl||0);
  invT+=inv;paidT+=paid;remT+=rem;

  tb.innerHTML+=`
  <tr>
   <td>${p[0]}</td>
   <td>${p[1]}</td>
   <td>${p[2]}</td>
   <td>${Math.ceil((new Date(p[2])-today)/86400000)}</td>
   <td><input value="${sl}" onchange="setVal('${p[0]}','sl',this.value)"></td>
   <td><button onclick="setFlag('${p[0]}','slp')">Paid</button></td>
   <td><input value="${ai}" onchange="setVal('${p[0]}','ai',this.value)"></td>
   <td><button onclick="setFlag('${p[0]}','aip')">Paid</button></td>
   <td><input value="${sg}" onchange="setVal('${p[0]}','sg',this.value)"></td>
   <td><button onclick="setFlag('${p[0]}','sgp')">Paid</button></td>
   <td>${inr(inv)}</td>
   <td>${inr(paid)}</td>
   <td><input value="${d.avl||0}" onchange="setVal('${p[0]}','avl',this.value)"></td>
   <td><input value="${d.bor||0}" onchange="setVal('${p[0]}','bor',this.value)"></td>
   <td>${inr(rem)}</td>
  </tr>`;
 });

 document.getElementById("dInv").textContent=inr(invT);
 document.getElementById("dPend").textContent=inr(invT-paidT);
 document.getElementById("dRem").textContent=inr(remT);
}

/* ================= ACTIONS ================= */
function setVal(c,f,v){
 store[c]=store[c]||{};
 store[c][f]=+v||0;
 saveLocal();render();
}
function setFlag(c,f){
 store[c]=store[c]||{};
 store[c][f]=!store[c][f];
 saveLocal();render();
}

/* ================= INIT ================= */
render();

/* ================= PLANE ================= */
const plane=document.getElementById("bgFlight");
let x=-30,y=20;
(function fly(){
 x+=20;if(x>120){x=-30;y=Math.random()*60}
 plane.style.left=x+"vw";plane.style.top=y+"vh";
 setTimeout(fly,5000)
})();
</script>

</body>
</html>
